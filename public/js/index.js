const cfa=new Vue({el:"#cfa_events",data:{isDisabled:!0,currentPage:1,max_pages:0,previousEvents:[],currentFilter:""},methods:{cfa_year_filter:function(a,e){cfa.currentPage=1,cfa.currentFilter=e,jQuery.ajax({type:"get",url:cfa_ajax.ajaxurl,data:{action:"get_archive_events",nonce:cfa_ajax.nonce,page:1,year:e},beforeSend:function(){cfa.isDisabled=!0},dataType:"json",success:function(e){cfa.isDisabled=!1,e.previousEvents&&(cfa.previousEvents=e.previousEvents),e.maxpages&&(cfa.max_pages=e.maxpages),jQuery(document).find(".years_btns .cfaActive").removeClass("cfaActive"),jQuery(a.target).addClass("cfaActive")}})},loadmore_events:function(){jQuery.ajax({type:"get",url:cfa_ajax.ajaxurl,data:{action:"get_archive_events",nonce:cfa_ajax.nonce,page:cfa.currentPage+1,year:cfa.currentFilter},beforeSend:function(){cfa.isDisabled=!0},dataType:"json",success:function(e){cfa.isDisabled=!1,e.previousEvents&&(e.previousEvents.forEach(e=>{cfa.previousEvents.push(e)}),cfa.currentPage+=1),e.maxpages&&(cfa.max_pages=e.maxpages)}})}},updated:function(){},mounted:function(){let e=new Promise((a,e)=>{jQuery.ajax({type:"get",url:cfa_ajax.ajaxurl,data:{action:"get_archive_events",nonce:cfa_ajax.nonce},dataType:"json",success:function(e){a(e)}})});e.then(e=>{cfa.isDisabled=!1,e.previousEvents&&(cfa.previousEvents=e.previousEvents),e.maxpages&&(cfa.max_pages=e.maxpages)})}}),cfasingle=new Vue({el:"#event_page",data:{isDisabled:!1,isForm:!0,registrant_name:"",registrant_email:"",registrant_phone:"",registrant_company:"",submittedAlert:""},methods:{register_form_submit:function(e){e.preventDefault();var e=document.querySelector("input[name='event_id']").value,a=this.registrant_name,t=this.registrant_email,s=this.registrant_phone,n=this.registrant_company;jQuery.ajax({type:"post",url:cfa_ajax.ajaxurl,data:{action:"registrants_register",nonce:cfa_ajax.nonce,data:{event_id:e,registrant_name:a,registrant_email:t,registrant_phone:s,registrant_company:n}},beforeSend:function(){cfasingle.isDisabled=!0},dataType:"json",success:function(e){var a;cfasingle.isDisabled=!1,e.success&&(cfasingle.isForm=!1,a='<h3 style="margin-bottom: 10px;" class="head3"><strong>Thank</strong> You</h3>'+e.success,cfasingle.submittedAlert=a),e.error&&alert(e.error)}})}}});